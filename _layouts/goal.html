<!-- Page layout modified to add Quebec's indicators -->
<!-- From https://github.com/open-sdg/open-sdg/blob/master/_layouts/goal.html on 2022/10/07 -->


{% include head.html %}
{% include header.html %}

<div class="container">
  {% include components/goal/breadcrumbs.html %}
  {% if site.create_goals.previous_next_links %}
    {% include components/previous-next-links.html previous_label=page.t.goal.previous next_label=page.t.goal.next %}
  {% endif %}
</div>

{% include components/goal/header.html %}

{% if page.goal.number == "2" %}
{% include goal_2.html %}
{% endif %}

{% if page.goal.number == "3" %}
{% include goal_3.html %}
{% endif %}

{% if page.goal.number != "3" and page.goal.number != "2" %}
<div id="main-content" class="container" role="main">

  {% include components/goal/goal-content.html content=content %}

  <div class="container g-0">
    
    {% include components/goal/indicators_qc.html content=content %}

    <h2 class="goal-page-heading">{{ page.t.general.data }}</h2>
    
    {% assign number = 1 %}

    {% assign goal_indicators = page.indicators | where: 'goal_number', page.goal.number | group_by: 'target_number' %}
    {% for group in goal_indicators %}
      {% assign target = group.name | sdg_lookup %}
      <div class="row align-items-start goal-target">
          <div class="col-auto goal-page-target-number">
            <h3 class="goal-target">
              <span class="target-number"><span class="visually-hidden">{{ page.t.general.target }}</span></span>
            </h3>
          </div>
          <div class="col goal-page-target-name">
            <span class="target-name">{{ target.name }}</span>
          </div>
      </div>
        {% for indicator in group.items %}

          {% assign tag_classes = "" | split: "," %}
          {% if indicator.tags %}
            {% for tag in indicator.tags %}
              {% assign tag_slug = "indicator-" | append: tag | slugify %}
              {% assign tag_classes = tag_classes | push: tag_slug %}
            {% endfor %}
          {% endif %}
          {% assign tag_classes = tag_classes | join: " " %}
          {% if indicator.progress_status and indicator.progress_status != '' %}
            {% assign indicator_has_progress = true %}
          {% endif %}
          
          {% assign indicator_number = page.goal.number | append: "." | append: number %}
          {% assign indicator_name = page.t.general.issue | append: " " | append: number %}
          {% assign number = number | plus: 1 %}

          <div class="row align-items-start goal-indicator">
          
            <div class="col-auto goal-page-indicator-number">
              <h4>
                <span class="indicator-number"><span class="visually-hidden">{{ page.t.general.indicator }}</span> {{ indicator_number }}</span>
              </h4>
            </div>
            <div class="col goal-page-indicator-name">
              {% if indicator.placeholder and indicator.placeholder != '' %}
              <span class="indicator-name">{{ indicator.placeholder }}</span>
              {% else %}
              <span class="indicator-name"><a href="{{ indicator.url }}">{{ indicator_name }}</a></span>
              {% include components/indicator/tags.html tags=indicator.tags reporting_status=true indicator=indicator %}
            </div>
            {% if indicator_has_progress %}
            <div class="col-lg-1 goal-page-indicator-progress">
              <span class="visually-hidden">{{ site.progress_status.status_heading | t }}</span>
              {% include components/progress/progress-status.html indicator=indicator %}
            </div>
            {% endif %}
            {% endif %}
          </div>
        {% endfor %}
        <hr class="goal-page-target-rule" />
    {% endfor %}
  </div>
  {% include back-to-top.html %}
</div>
{% endif %}


{% include footer.html %}